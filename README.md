# CloudFlare ImgBed 上传器 - Edge 浏览器扩展

一个用于右键上传图片到 CloudFlare ImgBed 图床的 Edge 浏览器扩展。

## 🚀 功能特性

### 核心功能
- **右键菜单上传**：在任意图片上右键，选择"上传图片到 ImgBed"
- **剪贴板上传**：右键选择"上传剪贴板图片到 ImgBed"或使用快捷键 `Ctrl+Shift+U`
- **拖拽上传**：直接将图片文件拖拽到网页任意位置
- **多种复制格式**：支持纯链接、Markdown、HTML、BBCode 格式

### 配置选项
- API 地址配置
- 上传认证码配置
- 上传渠道选择（Telegram、CloudFlare R2、S3）
- 文件命名方式（默认前缀_原名、仅前缀、仅原名、短链接）
- 返回格式选择（默认/完整链接）
- 上传目录配置
- 自动复制到剪贴板
- 通知显示控制

## 📦 安装方法

### 方法一：开发者模式安装（推荐）

1. **下载扩展文件**
   - 下载整个 `image-up` 文件夹到本地

2. **打开 Edge 扩展管理**
   - 打开 Microsoft Edge 浏览器
   - 在地址栏输入 `edge://extensions/` 并回车
   - 或者点击右上角三点菜单 → 扩展

3. **启用开发者模式**
   - 在扩展页面左下角，打开"开发人员模式"开关

4. **加载扩展**
   - 点击"加载解压缩的扩展"按钮
   - 选择下载的 `image-up` 文件夹
   - 点击"选择文件夹"

5. **完成安装**
   - 扩展将出现在扩展列表中
   - 确保扩展已启用

### 方法二：打包安装

1. **打包扩展**
   - 在扩展管理页面，点击"打包扩展"
   - 选择 `image-up` 文件夹
   - 生成 `.crx` 文件

2. **安装打包文件**
   - 将生成的 `.crx` 文件拖拽到扩展管理页面
   - 确认安装

## ⚙️ 配置说明

### 首次配置

1. **打开配置页面**
   - 点击扩展图标打开配置弹窗
   - 或者右键任意位置选择"ImgBed 配置"

2. **填写必要信息**
   - **API 地址**：您的 CloudFlare ImgBed 服务地址（如：`https://your.domain`）
   - **上传认证码**：用于身份验证的认证码

3. **调整可选配置**
   - **上传渠道**：选择存储后端（Telegram/CloudFlare R2/S3）
   - **文件命名方式**：控制上传后的文件名格式
   - **返回格式**：选择返回相对路径还是完整URL
   - **复制格式**：设置复制到剪贴板的链接格式
   - **其他选项**：服务端压缩、自动重试、自动复制等

4. **测试连接**
   - 点击"测试连接"按钮验证配置是否正确
   - 看到"连接测试成功！"表示配置正确

5. **保存配置**
   - 点击"保存配置"按钮

### 配置项详解

| 配置项 | 说明 | 默认值 |
|--------|------|--------|
| API 地址 | CloudFlare ImgBed 服务地址 | https://your.domain |
| 上传认证码 | 身份验证码 | 无 |
| 上传渠道 | 存储后端选择 | telegram |
| 文件命名方式 | 文件名格式 | default |
| 返回格式 | 链接格式 | default |
| 上传目录 | 目标目录 | 空（根目录） |
| 复制格式 | 剪贴板格式 | markdown |
| 服务端压缩 | Telegram 图片压缩 | 开启 |
| 自动重试 | 失败重试 | 开启 |
| 自动复制 | 自动复制链接 | 开启 |
| 显示通知 | 通知提醒 | 开启 |

## 📖 使用方法

### 1. 右键上传图片
- 在任意网页图片上右键
- 选择"上传图片到 ImgBed"
- 等待上传完成，链接自动复制到剪贴板

### 2. 上传剪贴板图片
- 复制图片到剪贴板（截图、复制图片等）
- 在网页任意位置右键，选择"上传剪贴板图片到 ImgBed"
- 或使用快捷键 `Ctrl+Shift+U`

### 3. 拖拽上传
- 直接将图片文件从文件管理器拖拽到网页
- 自动开始上传

### 4. 查看配置
- 点击扩展图标查看和修改配置
- 右键菜单中也有"ImgBed 配置"选项

## 🔧 故障排除

### 常见问题

1. **上传失败**
   - 检查 API 地址是否正确
   - 检查认证码是否有效
   - 使用"测试连接"功能验证配置

2. **右键菜单不显示**
   - 确保扩展已启用
   - 刷新网页重试
   - 检查是否在图片上右键

3. **剪贴板上传失败**
   - 确保剪贴板中有图片
   - 检查浏览器权限设置
   - 尝试重新复制图片

4. **拖拽上传无响应**
   - 确保拖拽的是图片文件
   - 检查文件大小是否超限
   - 尝试刷新页面

### 权限说明

扩展需要以下权限：
- `contextMenus`：创建右键菜单
- `storage`：保存配置信息
- `activeTab`：访问当前标签页
- `clipboardRead`：读取剪贴板图片
- `notifications`：显示通知
- `host_permissions`：访问所有网站（用于下载图片）

## 📝 更新日志

### v1.0.0
- 初始版本发布
- 支持右键菜单上传
- 支持剪贴板上传
- 支持拖拽上传
- 完整的配置管理界面
- 多种链接格式支持

## 🤝 支持

如果您遇到问题或有建议，请：
1. 检查配置是否正确
2. 查看浏览器控制台错误信息
3. 尝试重新安装扩展

## 📄 许可证

本项目采用 MIT 许可证。